{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { findDOMNode } from 'react-dom';\nimport getStringLength from '../../../_util/getStringLength';\n/**\n * 为了计算方便，定位元素的下标可能返回数组长度，代表最后一个元素\n */\nexport var GHOST_ITEM_KEY = '__rc_ghost_item__';\n/**\n * 根据滚动条当前的滚动百分比，计算出基准元素\n * 在基准元素的上方和下方渲染可见区域的其他元素\n */\nexport function getLocationItem(scrollPtg, total) {\n  var itemIndex = Math.floor(scrollPtg * total);\n  var itemTopPtg = itemIndex / total;\n  var offsetPtg = (scrollPtg - itemTopPtg) / (1 / total);\n  return {\n    index: itemIndex,\n    // scrollPtg >= itemTopPtg，计算结果为元素应当补充的滚动距离相对自身高度的偏移量\n    offsetPtg: Number.isNaN(offsetPtg) ? 0 : offsetPtg\n  };\n}\n/**\n * 获取HTML元素高度\n */\nexport function getNodeHeight(node) {\n  var element = findDOMNode(node);\n  return element ? element.offsetHeight : 0;\n}\n/**\n * 获取有效的scrollTop值\n * Safari的缓动效果会获得负值的scrollTop\n */\nexport function getValidScrollTop(scrollTop, scrollRange) {\n  return scrollTop < 0 ? 0 : scrollTop > scrollRange ? scrollRange : scrollTop;\n}\n/**\n * 视口已滚动距离 / 总可滚动距离\n */\nexport function getScrollPercentage(_a) {\n  var scrollTop = _a.scrollTop,\n    scrollHeight = _a.scrollHeight,\n    clientHeight = _a.clientHeight;\n  var scrollRange = scrollHeight - clientHeight;\n  return scrollRange <= 0 ? 0 : getValidScrollTop(scrollTop, scrollRange) / scrollRange;\n}\n/**\n * 计算需要渲染的元素的开始下标、结束下标和用于定位的元素下标\n */\nexport function getRangeIndex(scrollPtg, itemCount, visibleCount) {\n  var _a = getLocationItem(scrollPtg, itemCount),\n    index = _a.index,\n    offsetPtg = _a.offsetPtg;\n  var beforeCount = Math.ceil(scrollPtg * visibleCount);\n  var afterCount = Math.ceil((1 - scrollPtg) * visibleCount);\n  return {\n    itemIndex: index,\n    itemOffsetPtg: offsetPtg,\n    startIndex: Math.max(0, index - beforeCount),\n    endIndex: Math.min(itemCount - 1, index + afterCount)\n  };\n}\n/**\n * 计算元素相对于视口顶部的偏移量\n */\nexport function getItemRelativeTop(_a) {\n  var itemHeight = _a.itemHeight,\n    itemOffsetPtg = _a.itemOffsetPtg,\n    scrollPtg = _a.scrollPtg,\n    clientHeight = _a.clientHeight;\n  return Math.floor(clientHeight * scrollPtg - itemHeight * itemOffsetPtg);\n}\n/**\n * 计算元素相对于整个滚动区域顶部的偏移量\n */\nexport function getItemAbsoluteTop(_a) {\n  var scrollTop = _a.scrollTop,\n    rest = __rest(_a, [\"scrollTop\"]);\n  return scrollTop + getItemRelativeTop(rest);\n}\n/**\n * 计算某一指定下标的元素相对于视口顶部的偏移量\n */\nexport function getCompareItemRelativeTop(_a) {\n  var locatedItemRelativeTop = _a.locatedItemRelativeTop,\n    locatedItemIndex = _a.locatedItemIndex,\n    compareItemIndex = _a.compareItemIndex,\n    startIndex = _a.startIndex,\n    endIndex = _a.endIndex,\n    getItemKey = _a.getItemKey,\n    itemElementHeights = _a.itemElementHeights,\n    itemHeight = _a.itemHeight;\n  var compareItemTop = locatedItemRelativeTop;\n  var compareItemKey = getItemKey(compareItemIndex);\n  if (compareItemIndex <= locatedItemIndex) {\n    for (var index = locatedItemIndex; index >= startIndex; index -= 1) {\n      var key = getItemKey(index);\n      if (key === compareItemKey) {\n        break;\n      }\n      var prevItemKey = getItemKey(index - 1);\n      compareItemTop -= itemElementHeights[prevItemKey] || itemHeight;\n    }\n  } else {\n    for (var index = locatedItemIndex; index <= endIndex; index += 1) {\n      var key = getItemKey(index);\n      if (key === compareItemKey) {\n        break;\n      }\n      compareItemTop += itemElementHeights[key] || itemHeight;\n    }\n  }\n  return compareItemTop;\n}\nexport function getLongestItemIndex(data) {\n  var result = -1;\n  var length = 0;\n  data.forEach(function (item, index) {\n    var _a;\n    item = typeof item === 'string' ? item : (_a = item.props) === null || _a === void 0 ? void 0 : _a.children;\n    if (typeof item === 'string') {\n      var _length = getStringLength(item);\n      if (_length > length) {\n        length = _length;\n        result = index;\n      }\n    }\n  });\n  return result;\n}","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","findDOMNode","getStringLength","GHOST_ITEM_KEY","getLocationItem","scrollPtg","total","itemIndex","Math","floor","itemTopPtg","offsetPtg","index","Number","isNaN","getNodeHeight","node","element","offsetHeight","getValidScrollTop","scrollTop","scrollRange","getScrollPercentage","_a","scrollHeight","clientHeight","getRangeIndex","itemCount","visibleCount","beforeCount","ceil","afterCount","itemOffsetPtg","startIndex","max","endIndex","min","getItemRelativeTop","itemHeight","getItemAbsoluteTop","rest","getCompareItemRelativeTop","locatedItemRelativeTop","locatedItemIndex","compareItemIndex","getItemKey","itemElementHeights","compareItemTop","compareItemKey","key","prevItemKey","getLongestItemIndex","data","result","forEach","item","props","children","_length"],"sources":["/Users/acetyl/Desktop/CS411Project/CS411/frontend/node_modules/@arco-design/web-react/es/_class/VirtualList/utils/itemUtil.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { findDOMNode } from 'react-dom';\nimport getStringLength from '../../../_util/getStringLength';\n/**\n * 为了计算方便，定位元素的下标可能返回数组长度，代表最后一个元素\n */\nexport var GHOST_ITEM_KEY = '__rc_ghost_item__';\n/**\n * 根据滚动条当前的滚动百分比，计算出基准元素\n * 在基准元素的上方和下方渲染可见区域的其他元素\n */\nexport function getLocationItem(scrollPtg, total) {\n    var itemIndex = Math.floor(scrollPtg * total);\n    var itemTopPtg = itemIndex / total;\n    var offsetPtg = (scrollPtg - itemTopPtg) / (1 / total);\n    return {\n        index: itemIndex,\n        // scrollPtg >= itemTopPtg，计算结果为元素应当补充的滚动距离相对自身高度的偏移量\n        offsetPtg: Number.isNaN(offsetPtg) ? 0 : offsetPtg,\n    };\n}\n/**\n * 获取HTML元素高度\n */\nexport function getNodeHeight(node) {\n    var element = findDOMNode(node);\n    return element ? element.offsetHeight : 0;\n}\n/**\n * 获取有效的scrollTop值\n * Safari的缓动效果会获得负值的scrollTop\n */\nexport function getValidScrollTop(scrollTop, scrollRange) {\n    return scrollTop < 0 ? 0 : scrollTop > scrollRange ? scrollRange : scrollTop;\n}\n/**\n * 视口已滚动距离 / 总可滚动距离\n */\nexport function getScrollPercentage(_a) {\n    var scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;\n    var scrollRange = scrollHeight - clientHeight;\n    return scrollRange <= 0 ? 0 : getValidScrollTop(scrollTop, scrollRange) / scrollRange;\n}\n/**\n * 计算需要渲染的元素的开始下标、结束下标和用于定位的元素下标\n */\nexport function getRangeIndex(scrollPtg, itemCount, visibleCount) {\n    var _a = getLocationItem(scrollPtg, itemCount), index = _a.index, offsetPtg = _a.offsetPtg;\n    var beforeCount = Math.ceil(scrollPtg * visibleCount);\n    var afterCount = Math.ceil((1 - scrollPtg) * visibleCount);\n    return {\n        itemIndex: index,\n        itemOffsetPtg: offsetPtg,\n        startIndex: Math.max(0, index - beforeCount),\n        endIndex: Math.min(itemCount - 1, index + afterCount),\n    };\n}\n/**\n * 计算元素相对于视口顶部的偏移量\n */\nexport function getItemRelativeTop(_a) {\n    var itemHeight = _a.itemHeight, itemOffsetPtg = _a.itemOffsetPtg, scrollPtg = _a.scrollPtg, clientHeight = _a.clientHeight;\n    return Math.floor(clientHeight * scrollPtg - itemHeight * itemOffsetPtg);\n}\n/**\n * 计算元素相对于整个滚动区域顶部的偏移量\n */\nexport function getItemAbsoluteTop(_a) {\n    var scrollTop = _a.scrollTop, rest = __rest(_a, [\"scrollTop\"]);\n    return scrollTop + getItemRelativeTop(rest);\n}\n/**\n * 计算某一指定下标的元素相对于视口顶部的偏移量\n */\nexport function getCompareItemRelativeTop(_a) {\n    var locatedItemRelativeTop = _a.locatedItemRelativeTop, locatedItemIndex = _a.locatedItemIndex, compareItemIndex = _a.compareItemIndex, startIndex = _a.startIndex, endIndex = _a.endIndex, getItemKey = _a.getItemKey, itemElementHeights = _a.itemElementHeights, itemHeight = _a.itemHeight;\n    var compareItemTop = locatedItemRelativeTop;\n    var compareItemKey = getItemKey(compareItemIndex);\n    if (compareItemIndex <= locatedItemIndex) {\n        for (var index = locatedItemIndex; index >= startIndex; index -= 1) {\n            var key = getItemKey(index);\n            if (key === compareItemKey) {\n                break;\n            }\n            var prevItemKey = getItemKey(index - 1);\n            compareItemTop -= itemElementHeights[prevItemKey] || itemHeight;\n        }\n    }\n    else {\n        for (var index = locatedItemIndex; index <= endIndex; index += 1) {\n            var key = getItemKey(index);\n            if (key === compareItemKey) {\n                break;\n            }\n            compareItemTop += itemElementHeights[key] || itemHeight;\n        }\n    }\n    return compareItemTop;\n}\nexport function getLongestItemIndex(data) {\n    var result = -1;\n    var length = 0;\n    data.forEach(function (item, index) {\n        var _a;\n        item = typeof item === 'string' ? item : (_a = item.props) === null || _a === void 0 ? void 0 : _a.children;\n        if (typeof item === 'string') {\n            var _length = getStringLength(item);\n            if (_length > length) {\n                length = _length;\n                result = index;\n            }\n        }\n    });\n    return result;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}